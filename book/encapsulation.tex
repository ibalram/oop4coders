%=====================================================================
\ifx\wholebook\relax\else
	\documentclass{KodeBook}
	\input{calls}
	\begin{document}
\fi
%=====================================================================

\chapter{Encapsulation}

\begin{introduction}
	Encapsulation is one important concept of OOP. 
	It is the mechanism of restricting direct access to some members of a class.
	It helps managing complexity when debugging source code. 
	If a field is accessed everywhere in your source code, this makes it difficult to find errors related to this field. 
	Also, if a field of a class (A) is used by a class (B) then we changed it (either its name or how it gets assigned), we have to change all the code where it appears in (B).
	In this chapter, we will show different visibility modes and how they are implemented in each language.
\end{introduction}

\section{Public members}

Public visibility mode is used to access a member of a class from everywhere. 
Public methods of a class provide an interface that allows them to be called so the object can afford some behavior. 
As for fields, public visibility mode is not preferable since it breaks encapsulation, and it has limited uses:
\begin{itemize}
	\item Constant fields can be exposed to the outside classes.%Joshua Bloch writes in Effective Java
	\item Classes which represent just data, and unlikely to be changed in the future.
\end{itemize}

\subsection{C++}

Public members are defined inside the class header using the modifier \keyword{public} just one time. 
Every member coming after that modifier is considered as public.
If you use \keyword{struct} instead of \keyword{class}, all members are public by default.

\lstinputlisting[language=C++, linerange={6-11,21-21}, style=codeStyle]{../codes/cpp/encapsulation/person.h}

These members can be accessed anywhere

\lstinputlisting[language=C++, linerange={4-6, 8-8, 11-11,13-14}, style=codeStyle]{../codes/cpp/encapsulation/app.cpp}

An important remark: when you compile multiple files using g++, you have to include all cpp files
\begin{lstlisting}[style=shellStyle]
$ g++ app.cpp person.cpp student.cpp
\end{lstlisting}

If you include a header twice or more, you may have an error telling you that you defined the class more than once. 
To correct this, you have to use \nameword{\#include guard}.

\lstinputlisting[language=C++, linerange={1-3,6-7,21-22}, style=codeStyle]{../codes/cpp/encapsulation/person.h}

\subsection{Java}

Every public member in Java must preceded by the keyword \keyword{public}. 

\lstinputlisting[language=Java, linerange={1-5,12-12,18-20,27-29}, style=codeStyle]{../codes/java/src/encapsulation/core/Person.java}

These members can be accessed anywhere
\lstinputlisting[language=Java, linerange={1-8,10-10,14-14,16-18}, style=codeStyle]{../codes/java/src/encapsulation/main/App.java}

\subsection{Javascript} 

All fields with the keyword \keyword{this} are public. 
All  methods defined using the same keyword inside the constructor or using the prototype are public.

%\lstinputlisting[linerange={1-1,5-5}, style=codeStyle]{../codes/javascript/person2.js}
%
%\lstinputlisting[linerange={1-1,15-15}, style=codeStyle]{../codes/javascript/person.js}


\subsection{Lua}

%\lstinputlisting[language={[5.2]Lua}, linerange={1-2}, style=codeStyle]{../codes/lua/person.lua}

\subsection{Perl}

%\lstinputlisting[language=Perl, linerange={4-4}, style=codeStyle]{../codes/perl/person.pl}

\subsection{PHP}

The default visibility mode in PHP is public.
A function defined without a visibility modifier or a variable defined using \keyword{var} are public by default. 
It is a good practice to prefix class members with a visibility modifier, since the inverse is used just to keep forward compatibility with versions before 5.1.3.

\lstinputlisting[language=PHP, linerange={2-5,11-11,15-15,17-17,24-25}, style=codeStyle]{../codes/php/encapsulation/person.php}

The member with public visibility mode can be accessed anywhere.

\lstinputlisting[language=PHP, linerange={3-3,6-6,8-9,12-12}, style=codeStyle]{../codes/php/encapsulation/app.php}

\subsection{Python}

All class members are public by default; it is the only visibility mode in Python. 

\lstinputlisting[language=Python, linerange={4-4, 8-8, 12-12,15-15,19-19}, style=codeStyle]{../codes/python/encapsulation/person.py}

The members can be accessed anywhere
\lstinputlisting[language=Python, linerange={4-7, 9-9, 13-13}, style=codeStyle]{../codes/python/encapsulation/app.py}

\subsection{Ruby}

%\lstinputlisting[language=Ruby, linerange={3-3,19-19}, style=codeStyle]{../codes/ruby/person.rb}


\section{Protected members}

\subsection{C++}

%\lstinputlisting[language=C++, linerange={4-5,34-34}, style=codeStyle]{../codes/cpp/person0.cpp}

\subsection{Java}

%\lstinputlisting[language=Java, linerange={1-1,40-40}, style=codeStyle]{../codes/java/src/Person.java}

\subsection{Javascript} 

%\lstinputlisting[linerange={1-1,5-5}, style=codeStyle]{../codes/javascript/person2.js}

%\lstinputlisting[linerange={1-1,15-15}, style=codeStyle]{../codes/javascript/person.js}


\subsection{Lua}

%\lstinputlisting[language={[5.2]Lua}, linerange={1-2}, style=codeStyle]{../codes/lua/person.lua}

\subsection{Perl}

%\lstinputlisting[language=Perl, linerange={4-4}, style=codeStyle]{../codes/perl/person.pl}

\subsection{PHP}

%\lstinputlisting[language=PHP, linerange={2-2,27-27}, style=codeStyle]{../codes/php/person.php}

\subsection{Python}

%\lstinputlisting[language=Python, linerange={4-4}, style=codeStyle]{../codes/python/person.py}

\subsection{Ruby}

%\lstinputlisting[language=Ruby, linerange={3-3,19-19}, style=codeStyle]{../codes/ruby/person.rb}


\section{Private members}

\subsection{C++}

%\lstinputlisting[language=C++, linerange={4-5,34-34}, style=codeStyle]{../codes/cpp/person0.cpp}

\subsection{Java}

%\lstinputlisting[language=Java, linerange={1-1,40-40}, style=codeStyle]{../codes/java/src/Person.java}

\subsection{Javascript} 

%\lstinputlisting[linerange={1-1,5-5}, style=codeStyle]{../codes/javascript/person2.js}
%
%\lstinputlisting[linerange={1-1,15-15}, style=codeStyle]{../codes/javascript/person.js}


\subsection{Lua}

%\lstinputlisting[language={[5.2]Lua}, linerange={1-2}, style=codeStyle]{../codes/lua/person.lua}

\subsection{Perl}

%\lstinputlisting[language=Perl, linerange={4-4}, style=codeStyle]{../codes/perl/person.pl}

\subsection{PHP}

%\lstinputlisting[language=PHP, linerange={2-2,27-27}, style=codeStyle]{../codes/php/person.php}

\subsection{Python}

%\lstinputlisting[language=Python, linerange={4-4}, style=codeStyle]{../codes/python/person.py}

\subsection{Ruby}

%\lstinputlisting[language=Ruby, linerange={3-3,19-19}, style=codeStyle]{../codes/ruby/person.rb}


%\section{Other access modes}
%
%\subsection{C++}
%
%\lstinputlisting[language=C++, linerange={4-5,34-34}, style=codeStyle]{../codes/cpp/person0.cpp}
%
%\subsection{Java}
%
%\lstinputlisting[language=Java, linerange={1-1,40-40}, style=codeStyle]{../codes/java/src/Person.java}
%
%\subsection{Javascript} 
%
%\lstinputlisting[linerange={1-1,5-5}, style=codeStyle]{../codes/javascript/person2.js}
%
%\lstinputlisting[linerange={1-1,15-15}, style=codeStyle]{../codes/javascript/person.js}
%
%
%\subsection{Lua}
%
%\lstinputlisting[language={[5.2]Lua}, linerange={1-2}, style=codeStyle]{../codes/lua/person.lua}
%
%\subsection{Perl}
%
%\lstinputlisting[language=Perl, linerange={4-4}, style=codeStyle]{../codes/perl/person.pl}
%
%\subsection{PHP}
%
%\lstinputlisting[language=PHP, linerange={2-2,27-27}, style=codeStyle]{../codes/php/person.php}
%
%\subsection{Python}
%
%\lstinputlisting[language=Python, linerange={4-4}, style=codeStyle]{../codes/python/person.py}
%
%\subsection{Ruby}
%
%\lstinputlisting[language=Ruby, linerange={3-3,19-19}, style=codeStyle]{../codes/ruby/person.rb}


%=====================================================================
\ifx\wholebook\relax\else
% \cleardoublepage
% \bibliographystyle{../use/ESIbib}
% \bibliography{../bib/RATstat}
	\end{document}
\fi
%=====================================================================